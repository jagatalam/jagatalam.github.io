<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Turnamen PES21</title>
<style>
body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 20px;
}
h2 {
    text-align: center;
    color: #0078D7;
    margin: 20px 0;
}
/* Tombol Navigasi */
.nav-buttons {
    text-align:center; 
    margin-bottom:20px;
}
.nav-buttons button {
    padding: 10px 20px;
    margin: 0 5px;
    border-radius: 25px;
    border: none;
    background: linear-gradient(145deg, #0078D7, #0094FF);
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.25s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
.nav-buttons button:hover {
    background: linear-gradient(145deg, #005BBB, #0078D7);
    transform: translateY(-2px) scale(1.05);
}
.nav-buttons button.active {
    background: #005BBB;
    transform: scale(1.1);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
/* Dashboard */
.dashboard {
    display: flex;
    flex-direction: column;
    gap: 20px;
}
/* Layout atas: Skor + Grup + Juara */
.top-panels {
    display: flex;
    gap: 20px;
}
/* Panel */
.panel {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    flex: 1;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 10px;
}
th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: center;
}
th {
    background: #0078D7;
    color: white;
}
td.score {
    font-weight: bold;
    color: #005BBB;
}
.options {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 10px;
    flex-wrap: wrap;
}
.options button {
    padding: 8px 16px;
    border-radius: 25px;
    border: none;
    background: linear-gradient(145deg, #0078D7, #0094FF);
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.25s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
.options button:hover {
    background: linear-gradient(145deg, #005BBB, #0078D7);
    transform: translateY(-2px) scale(1.05);
}
.options button.active {
    background: #005BBB;
    transform: scale(1.1);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
@media(max-width:768px){
    .top-panels {
        flex-direction: column;
    }
    table {
        font-size: 12px;
    }
    th, td {
        padding: 6px;
    }
}
</style>

<!-- Tabletop.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>

</head>
<body>

<h2>Dashboard Turnamen PES21</h2>

<!-- Tombol Navigasi -->
<div class="nav-buttons">
    <button onclick="goPage('https://jagatalam.github.io/dashboard.html', this)">Dashboard</button>
    <button onclick="goPage('https://jagatalam.github.io/jadwal.html', this)">Jadwal</button>
    <button onclick="goPage('https://jagatalam.github.io/bagan.html', this)">Bagan</button>
    <button onclick="goPage('https://jagatalam.github.io/peraturan.html', this)">Peraturan</button>
</div>

<div class="dashboard">
    <!-- Tabel Grup -->
    <div class="panel">
        <h3>Grup</h3>
        <div class="options" id="grupOptions">
            <button class="active" onclick="setGrup('A')">Grup A</button>
            <button onclick="setGrup('B')">Grup B</button>
            <button onclick="setGrup('C')">Grup C</button>
            <button onclick="setGrup('D')">Grup D</button>
        </div>
        <table id="grupTable">
            <thead></thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- Bagian atas: Skor + Tahap Turnamen -->
    <div class="top-panels">
        <!-- Skor Pertandingan -->
        <div class="panel">
            <h3 id="matchTitle">Skor Pertandingan</h3>
            <div class="options" id="matchOptions">
                <button class="active" onclick="setMatch(1)">Match 1</button>
                <button onclick="setMatch(2)">Match 2</button>
                <button onclick="setMatch(3)">Match 3</button>
                <button onclick="setMatch(4)">Match 4</button>
                <button onclick="setMatch(5)">Match 5</button>
                <button onclick="setMatch(6)">Match 6</button>
            </div>
            <table id="matchTable">
                <thead>
                    <tr><th>Tim</th><th colspan="2">Skor</th><th>Tim</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Tabel Tahap Turnamen -->
        <div class="panel">
            <h3 id="stageTitle">Perempat Final</h3>
            <div class="options" id="stageOptions">
                <button class="active" onclick="setStage('quarter')">Perempat Final</button>
                <button onclick="setStage('semi')">Semi Final</button>
                <button onclick="setStage('final')">Final</button>
            </div>
            <table id="stageTable">
                <thead>
                    <tr><th>Tim</th><th colspan="2">Skor</th><th>Tim</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Tabel Juara -->
    <div class="panel">
        <h3>Juara</h3>
        <table id="winnerTable">
            <thead>
                <tr><th>Juara</th><th>Tim</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
const publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQhwyeQX0Z6ziiD43n4-6kiQ5jtD_gp7-rRNM74BWXrnsydR5fqVe6-MgcI_wODiXsroj6T92uVuJ5J/pubhtml';

function init() {
    Tabletop.init({
        key: publicSpreadsheetUrl,
        simpleSheet: false,
        wanted: ["match1","match2","match3","match4","match5","match6","grupA","grupB","grupC","grupD","QF","SF","final","juara"],
        callback: showData
    });
}

function showData(data) {
    window.spreadsheetData = data; // simpan data global
    setMatch(1);
    setGrup('A');
    setStage('quarter');
    updateWinnerTable();
}

function updateMatchTable(match) {
    const tbody = document.querySelector("#matchTable tbody");
    const sheetName = 'match' + match;
    const data = window.spreadsheetData[sheetName].elements;
    tbody.innerHTML = data.map(d => `<tr><td>${d.Tim1}</td><td class="score">${d.Score1}</td><td class="score">${d.Score2}</td><td>${d.Tim2}</td></tr>`).join('');
}

function updateGrupTable(grup) {
    const table = document.getElementById("grupTable");
    const sheetName = 'grup' + grup;
    const data = window.spreadsheetData[sheetName].elements;
    table.querySelector("thead").innerHTML = `<tr><th>Tim</th><th>Main</th><th>Menang</th><th>Seri</th><th>Kalah</th><th>Gol</th><th>Point</th></tr>`;
    table.querySelector("tbody").innerHTML = data.map(r => `<tr><td>${r.Tim}</td><td>${r.Main}</td><td>${r.Menang}</td><td>${r.Seri}</td><td>${r.Kalah}</td><td>${r.Gol}</td><td class="score">${r.Point}</td></tr>`).join('');
}

function updateStageTable(stage) {
    const tbody = document.querySelector("#stageTable tbody");
    const sheetName = stage === "quarter" ? 'QF' : stage === "semi" ? 'SF' : 'final';
    const data = window.spreadsheetData[sheetName].elements;
    document.getElementById("stageTitle").innerText = stage === "quarter" ? "Perempat Final" : stage === "semi" ? "Semi Final" : "Final";
    tbody.innerHTML = data.map(d => `<tr><td>${d.Tim1}</td><td class="score">${d.Score1}</td><td class="score">${d.Score2}</td><td>${d.Tim2}</td></tr>`).join('');
}

function updateWinnerTable() {
    const tbody = document.querySelector("#winnerTable tbody");
    const data = window.spreadsheetData['juara'].elements[0];
    tbody.innerHTML = `
        <tr><td>Winner</td><td>${data.Winner}</td></tr>
        <tr><td>2nd Place</td><td>${data.Second}</td></tr>
        <tr><td>3rd Place</td><td>${data.Third}</td></tr>
    `;
}

// Tombol Navigasi
function goPage(page, btn){
    window.location.href = page;
    document.querySelectorAll('.nav-buttons button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}

// Tombol Match / Grup / Stage
function setMatch(match){
    updateMatchTable(match);
    document.querySelectorAll("#matchOptions button").forEach(b => b.classList.remove("active"));
    document.querySelector(`#matchOptions button:nth-child(${match})`).classList.add("active");
}
function setGrup(grup){
    updateGrupTable(grup);
    document.querySelectorAll("#grupOptions button").forEach(b => b.classList.remove("active"));
    document.querySelectorAll("#grupOptions button").forEach(btn => {
        if(btn.textContent.includes(grup)) btn.classList.add("active");
    });
}
function setStage(stage){
    updateStageTable(stage);
    document.querySelectorAll("#stageOptions button").forEach(b => b.classList.remove("active"));
    if(stage === "quarter") document.querySelector("#stageOptions button:nth-child(1)").classList.add("active");
    if(stage === "semi") document.querySelector("#stageOptions button:nth-child(2)").classList.add("active");
    if(stage === "final") document.querySelector("#stageOptions button:nth-child(3)").classList.add("active");
}

// Inisialisasi
window.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
