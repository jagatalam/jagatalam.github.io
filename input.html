<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Input Nama Tim</title>
<style>
body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #0b1a39;
    color: white;
    padding: 30px;
    display: flex;
    justify-content: space-between;
}

/* Struktur dua kolom utama */
.container {
    display: flex;
    width: 100%;
    gap: 30px;
}

/* Kiri: input grup */
.left {
    width: 65%;
}

/* Kanan: daftar tim */
.right {
    width: 30%;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 10px;
    padding: 20px;
    height: fit-content;
    box-shadow: 0 0 10px rgba(255,255,255,0.1);
}

/* Judul */
h2 {
    text-align: center;
    color: #FFD700;
    margin-bottom: 25px;
}

/* Blok setiap grup */
.group-input {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 10px;
    margin-bottom: 25px;
    padding: 20px;
}

/* Judul grup */
.group-input h3 {
    margin-top: 0;
    color: #FFD700;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 15px;
}

/* Baris tiap tim */
.group-input .team-row {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
}

/* Label "Tim 1" */
label {
    width: 70px;
    font-weight: 500;
}

/* Dropdown */
select {
    flex: 1;
    padding: 6px 8px;
    border-radius: 6px;
    border: none;
    margin-right: 10px;
    font-size: 14px;
}

/* Tombol input */
button {
    background: #FFD700;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    font-size: 13px;
    transition: 0.2s;
}
button:hover {
    background: #FFC300;
}

/* Tombol reset */
#resetAll {
    display: block;
    margin: 30px auto;
    padding: 10px 25px;
    background: #d9534f;
    border: none;
    color: white;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
}
#resetAll:hover {
    background: #c9302c;
}

/* Textarea daftar tim */
textarea {
    width: 100%;
    height: 320px;
    border-radius: 10px;
    border: none;
    padding: 10px;
    resize: none;
    font-size: 14px;
    color: #111;
}
</style>
</head>
<body>

<div class="container">
    <div class="left">
        <h2>Input Nama Tim per Grup</h2>
        <div id="formContainer"></div>
        <button id="resetAll" onclick="resetAll()">ðŸ”„ Reset Semua Grup</button>
    </div>

    <div class="right">
        <h3>ðŸ“‹ Daftar Tim</h3>
        <p style="font-size: 13px; color: #FFD700;">Masukkan daftar nama tim di sini (satu nama per baris):</p>
        <textarea id="teamList" placeholder="Contoh:
Tim Alpha
Tim Bravo
Tim Charlie
Tim Delta
Tim Echo"></textarea>
    </div>
</div>

<script>
const groups = ['A','B','C','D'];

// Buat form input per grup
function createForm() {
    const container = document.getElementById("formContainer");
    container.innerHTML = "";
    groups.forEach(gr => {
        let formHTML = `<div class="group-input"><h3>GRUP ${gr}</h3>`;
        for (let i = 1; i <= 4; i++) {
            formHTML += `
                <div class="team-row">
                    <label>Tim ${i}</label>
                    <select id="group${gr}_team${i}">
                        <option value="">-- pilih tim --</option>
                    </select>
                    <button onclick="saveTeam('${gr}', ${i})">Input</button>
                </div>`;
        }
        formHTML += `</div>`;
        container.innerHTML += formHTML;
    });
    updateDropdowns();
}

// Update dropdown berdasarkan textarea
function updateDropdowns() {
    const teamText = document.getElementById("teamList").value.trim();
    const teamArray = teamText.split("\n").map(t => t.trim()).filter(t => t);
    document.querySelectorAll("select").forEach(sel => {
        const currentVal = sel.value;
        sel.innerHTML = `<option value="">-- pilih tim --</option>`;
        teamArray.forEach(team => {
            const opt = document.createElement("option");
            opt.value = team;
            opt.textContent = team;
            sel.appendChild(opt);
        });
        sel.value = currentVal;
    });
}

// Simpan nama tim ke localStorage
function saveTeam(group, index) {
    const selectId = `group${group}_team${index}`;
    const newName = document.getElementById(selectId).value.trim();
    if (newName === "") return alert("Silakan pilih nama tim!");

    let teams = JSON.parse(localStorage.getItem(`group${group}`)) || ["","","",""];
    teams[index - 1] = newName;
    localStorage.setItem(`group${group}`, JSON.stringify(teams));

    // Trigger event untuk update realtime di halaman overlay
    window.dispatchEvent(new StorageEvent('storage', { key: `group${group}`, newValue: JSON.stringify(teams) }));

    alert(`âœ… Tim ${index} pada Grup ${group} telah diupdate!`);
}

// Reset semua grup
function resetAll() {
    if (confirm("Yakin ingin menghapus semua nama tim di semua grup?")) {
        groups.forEach(gr => localStorage.removeItem(`group${gr}`));
        alert("Semua grup telah direset!");
        createForm();
    }
}

// Update dropdown otomatis saat textarea berubah
document.getElementById("teamList").addEventListener("input", updateDropdowns);

createForm();
</script>

</body>
</html>
